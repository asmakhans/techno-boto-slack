let RTMClient,SLACK_OAUTH_TOKEN,BOT_SPAM_CHANNEL,WebClient;_2b1‍.w("@slack/rtm-api",[["RTMClient",["RTMClient"],function(v){RTMClient=v}]]);_2b1‍.w("./constants",[["SLACK_OAUTH_TOKEN",["SLACK_OAUTH_TOKEN"],function(v){SLACK_OAUTH_TOKEN=v}],["BOT_SPAM_CHANNEL",["BOT_SPAM_CHANNEL"],function(v){BOT_SPAM_CHANNEL=v}]]);_2b1‍.w("@slack/web-api",[["WebClient",["WebClient"],function(v){WebClient=v}]]); //real time messaging client


const packageJson = require('../package.json')

const rtm = new RTMClient(SLACK_OAUTH_TOKEN);
const web = new WebClient(SLACK_OAUTH_TOKEN);

rtm.start()
    .catch(_2b1‍.g.console.error);

rtm.on('ready', async () => {
    console.log('bot started')
    sendMessage(BOT_SPAM_CHANNEL, 'Bot version ${packageJson.version} is online')
});

rtm.on('slack_event', async (eventType, event) => {
    _2b1‍.g.console.log(eventType)
    _2b1‍.g.console.log(event)
})

async function sendMessage(channel, message){
    await web.chat.postMessage({
        channel: channel,
        text: message,
    });
}
